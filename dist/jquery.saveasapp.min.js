(function(e,c,a,g){var d="saveAsApp",f={initDelay:1500,closeDelay:12000,target:"body",ignoreCookie:"saveAsAppIgnored",showedCookie:"saveAsAppShowed",frequency:120000,infoTexts:{"ios-safari":"Lisää tämä web-sovellus työpöydällesi: paina keskimmäistä kuvaketta ja valitse <br><strong>Lisää kotiin</strong>.","win-ie":"Lisää tämä web-sovellus työpöydällesi: paina oikeassa alakulmassa olevaa kuvaketta ja valitse <br><strong>kiinnitä aloitusnäyttöön</strong>.","android-native":"Voit lisätä tämän web-sovelluksen laitteesi työpöydälle."}};function b(h){this.settings=e.extend({},f,h);this._defaults=f;this.device={};this.text=false;this.init()}b.prototype={init:function(){if(c.navigator.standalone){return false}var h=parseInt(new Date().getTime());if(!this.checkDevice()){return false}var i=this;setTimeout(function(){i.setCookie(i.settings.showedCookie,h);i.show();i.$panel.on("click","#bookmarkIgnore",e.proxy(i.remove,i))},this.settings.initDelay);setTimeout(function(){e("#bookmarkInfo").fadeOut(function(){e(this).remove()})},this.settings.closeDelay);return true},remove:function(){this.setCookie(this.settings.ignoreCookie,true);this.$panel.animate({top:"-1000px"},500,function(){e(this).remove()});return false},setCookie:function(i,j){var h=new Date();h.setTime(h.getTime()+(90*24*60*60*1000));a.cookie=i+"="+j+";expires="+h.toUTCString()},getCookie:function(h){var i=a.cookie.match("(^|;) ?"+h+"=([^;]*)(;|$)");return i?i[2]:null},checkDevice:function(){var h=navigator.userAgent;if(h.indexOf("iPhone")>0||h.indexOf("iPad")>0){this.device.os="ios";if(h.indexOf("Safari")){this.device.browser="safari"}}else{if(h.indexOf("Android")>0){this.device.os="android";if(h.indexOf("WebKit")){this.device.browser="native"}}else{if(h.indexOf("Windows Phone")>0){this.device.os="win";if(h.indexOf("IEMobile")){this.device.browser="ie"}}}}return(this.device.os&&this.device.browser)},getText:function(){var h=this.device.os+"-"+this.device.browser;if(this.settings.infoTexts[h].length>1){return this.settings.infoTexts[h]}else{return false}},show:function(){var h=this;this.$panel=e('<div id="bookmarkInfo" style="display:none">   <div id="bookmarkContent">       '+this.getText()+'   </div>   <a href="#" id="bookmarkIgnore">Piilota</a></div>');e(this.settings.target).append(this.$panel);this.$panel.css({display:"block"}).animate({top:"0"},1000,function(){setTimeout(function(){e("#bookmarkIgnore").css({top:h.$panel.height()+"px"}).fadeIn()},500)})}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})};e.extend({saveAsApp:function(h){new b(h)}})})(jQuery,window,document);